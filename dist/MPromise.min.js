/**
 * @Version 0.1.0
 * @Author: ta7sudan
 * @Repo: https://github.com/ta7sudan/MPromise#readme
 * @License: MIT
 */(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):(a=a||self,b(a.MPromise={}))})(this,function(a){'use strict';function b(a){process&&process.nextTick?process.nextTick(a):setTimeout(a,0)}const c=Symbol("status"),d=Symbol("value"),e=Symbol("subs"),f=Symbol("notify"),g=Symbol("depend"),h=Symbol("resolve"),i=Symbol("setValueAndStatus");class j{constructor(a){if(this[d]=void 0,this[c]=0,this[e]=[],a){let b=!1;const c=a=>{b||(b=!0,j[h](this,a))},d=a=>{b||(b=!0,this[i](a,2))};try{a(c,d)}catch(a){b||this[i](a,2)}}}static[h](a,b){if(0===a[c])if(a===b)a[i](new TypeError("promise is same as x"),2);else if(b instanceof j)0===b[c]?b[g](c=>{a[i](b[d],c)}):a[i](b[d],b[c]);else if("[object Object]"===Object.prototype.toString.call(b)||"function"==typeof b){let c=null;try{c=b.then}catch(b){return void a[i](b,2)}if("function"==typeof c){let d=!1;const e=c=>{if(!d)return d=!0,b===c?void a[i](new TypeError("cycle thenable"),2):void j[h](a,c)},f=b=>{d||(d=!0,a[i](b,2))};try{c.call(b,e,f)}catch(b){d||a[i](b,2)}}else a[i](b,1)}else a[i](b,1)}static resolve(a){return a instanceof j?a:new j(b=>b(a))}static reject(a){return a instanceof j?a:new j((b,c)=>c(a))}[i](a,b){0===this[c]&&(this[d]=a,this[c]=b,this[f]())}[g](a){this[e].push(a)}[f](){b(()=>{for(;this[e].length;)this[e].shift()(this[c])})}then(a,b){return new j((e,h)=>{this[g](c=>{if(1===c){if("function"==typeof a)try{const b=a.call(void 0,this[d]);e(b)}catch(a){h(a)}else e(this[d]);}else if("function"==typeof b)try{const a=b.call(void 0,this[d]);e(a)}catch(a){h(a)}else h(this[d])}),0!==this[c]&&this[f]()})}}const k=j[h];a.MPromise=j,a.resolve=k,a.reject=function(a,b){a[i](b,2)},Object.defineProperty(a,"__esModule",{value:!0})});
//# sourceMappingURL=MPromise.min.js.map
